var oSpPOptions={sAppUrl:"http://webcademy.ru",sAppUrlShow:"http://webcademy.ru",sAppUrlNormal:"http://webcademy.ru",sSubscribeUrl:"https://webcademy.spulse.net",sSubscribeFFUrl:"https://webcademy.spulse.net",bAutoSubscribe:true,bMobileEnabled:true,sAppKey:"d639c561c8b8c1f4b1e6aacf6b243afd",prompt_settings:"",prompt_title:"",prompt_text:"",sServerApi:"https://pushdata.sendpulse.com:4434",sServerStatApi:"https://pushdata.sendpulse.com:4435",sSafariPushId:"web.com.sendpulse.push",aBrowser:{},sBrowser:"",currentDB:null,timeSend:null,newWindow:null,pushedVariables:{},pushedInterval:!1,show_splogo:"1",spdomain_website:"https://sendpulse.com/ru/webpush-powered-by-sendpulse?sn=cmlnaHRibG9nLnJ1",aPoweredbySendpulse:{ru:"Предоставлено SendPulse",en:"Powered by SendPulse",ua:"Надано SendPulse",de:"Unterstützt von SendPulse"},aPromptMessage1:{ru:"запрашивает разрешение на:",en:"wants to:",ua:"запитує дозвіл на:",de:"bittet eine Erlaubnis"},aPromptMessage2:{ru:"Показывать оповещения",en:"Show notifications",ua:"Показувати сповіщення",de:"Benachrichtigunggen anzuzeigen"},aButtonAllowMessage:{ru:"Разрешить",en:"Allow",ua:"Дозволити",de:"Erlauben"},aButtonDenyMessage:{ru:"Блокировать",en:"Block",ua:"Блокувати",de:"Blockieren"},bWasPrompt:!1,iPromptDelay:"0",sUserHostHash:"9dae6d62c816560a842268bde2cd317d",sPushHost:"8feadacf719d74966b69e976f9e585eb",visitNumber:"1",subscriptionType:"SPTYPE:VAPID1:"};function oSendpulsePush(){var o=oSpPOptions.sAppUrl,t=oSpPOptions.sAppUrlShow,U=oSpPOptions.sAppUrlNormal,l=oSpPOptions.sSubscribeUrl,n=oSpPOptions.sSubscribeFFUrl,u=oSpPOptions.bAutoSubscribe,i=oSpPOptions.bMobileEnabled,c=oSpPOptions.sAppKey,j=oSpPOptions.prompt_settings,H=oSpPOptions.prompt_title,B=oSpPOptions.prompt_text,p=oSpPOptions.sServerApi,s=(oSpPOptions.sServerStatApi,oSpPOptions.sSafariPushId),a=oSpPOptions.aBrowser,d=oSpPOptions.sBrowser,r=oSpPOptions.currentDB,m=oSpPOptions.timeSend,b=oSpPOptions.newWindow,S=oSpPOptions.pushedVariables,g=oSpPOptions.pushedInterval,V=oSpPOptions.show_splogo,z=oSpPOptions.spdomain_website,W=oSpPOptions.aPoweredbySendpulse,Z=oSpPOptions.aPromptMessage1,F=oSpPOptions.aPromptMessage2,R=oSpPOptions.aButtonAllowMessage,Y=oSpPOptions.aButtonDenyMessage,P=oSpPOptions.bWasPrompt,e=oSpPOptions.iPromptDelay,h=oSpPOptions.visitNumber,v=oSpPOptions.sUserHostHash,f=oSpPOptions.sPushHost,w=oSpPOptions.subscriptionType,D=!1,A=new Date,Q=new Date(A.getFullYear(),A.getMonth()+1,A.getDate()).getTime();Q=A.getDate()+""+Q,this.start=function(){if(!oSpP.detectSite())return oSpP.log("Application allowed only for "+o),!1;if("iOS"==oSpP.detectOs())return oSpP.log("Application can not work on iOS"),!1;var e=oSpP.detectOs();if(!i&&("iOS"==e||"Android"==e))return oSpP.log("Application disabled for your device"),!1;if(a=oSpP.detectBrowser(),d=a.name.toLowerCase(),("iOS"==e||"Android"==e)&&"chrome"==d&&parseFloat(a.version)<42)return oSpP.log("Application disabled for your browser version"),!1;if("chrome"==d&&parseFloat(a.version)<42)return oSpP.log("Application can not work with Crome browser version less then 42"),!1;if("firefox"==d&&parseFloat(a.version)<44)return oSpP.log("Application can not work with Firefox browser version less then 44"),!1;if("firefox"==d&&(l=n),"chrome"==d||"firefox"==d||"opera"==d)if(window.addEventListener("message",function(e){e.origin.toLowerCase()==l.toLowerCase()&&("initend"==e.data?clearInterval(m):"closeme"==e.data?(b.close(),oSpP.putValueToDb("SPIDs",{type:"VapidSubscribed",value:1})):oSpP.storeSubscription(e.data))},!1),oSpP.getDbValue("SPIDs","SubscriptionId",function(e){void 0!==e.target.result&&"DENY"!=e.target.result.value&&oSpP.getDbValue("SPIDs","VapidSubscribed",function(e){void 0===e.target.result&&(D=!0,oSpP.addTransparentDiv(),oSpP.putValueToDb("SPIDs",{type:"VapidSubscribed",value:1}))})}),u)oSpP.getDbValue("SPIDs","SubscriptionId",function(e){void 0===e.target.result&&oSpP.getDbValue("SPIDs","PromptClosed",function(e){if(void 0===e.target.result)oSpP.startDelayedSubscription(oSpP.showPrompt);else{var t=parseInt(e.target.result.value);0==--t?(oSpP.deleteDbValue("SPIDs","PromptClosed"),oSpP.startDelayedSubscription(oSpP.showPrompt)):oSpP.putValueToDb("SPIDs",{type:"PromptClosed",value:t})}})});else for(var t=document.querySelectorAll(".sp_notify_prompt"),s=0;s<t.length;s++)t[s].addEventListener("click",function(){oSpP.showPopUp()});else if("safari"==d)if(u)oSpP.startDelayedSubscription(oSpP.startSubscription);else for(t=document.querySelectorAll(".sp_notify_prompt"),s=0;s<t.length;s++)t[s].addEventListener("click",function(){oSpP.startSubscription()})},this.startSubscription=function(){switch(d){case"safari":if(oSpP.isSafariNotificationSupported()){var e=window.safari.pushNotification.permission(s);oSpP.checkSafariPermission(e)}}},this.checkCookie=function(e){for(var t=e+"=",s=document.cookie.split(";"),o=0;o<s.length;o++){for(var n=s[o];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""},this.checkSafariPermission=function(e){oSpP.log("[DD] Permissions: "+e.permission),"default"===e.permission?(P=!0,oSpP.getDbValue("SPIDs","PromptShowed",function(e){void 0===e.target.result?(oSpP.sendPromptStat("prompt_showed"),oSpP.putValueToDb("SPIDs",{type:"PromptShowed",value:1})):oSpP.sendPromptStat("prompt_showed_again")}),window.safari.pushNotification.requestPermission(p,s,{appkey:c},oSpP.checkSafariPermission)):"denied"===e.permission?P&&oSpP.sendPromptStat("prompt_denied"):"granted"===e.permission&&(oSpP.uns(),P&&oSpP.sendPromptStat("prompt_granted"),oSpP.subscribe())},this.subscribe=function(){switch(d){case"safari":var e=window.safari.pushNotification.permission(s);if("granted"===e.permission){var t=e.deviceToken;oSpP.checkLocalSubsctoption(t)}}},this.checkLocalSubsctoption=function(t){oSpP.log("[DD] subscribe :: subscriptionId: "+t),oSpP.getDbValue("SPIDs","SubscriptionId",function(e){void 0===e.target.result?(oSpP.sendSubscribeDataToServer(t,"subscribe"),oSpP.putValueToDb("SPIDs",{type:"SubscriptionId",value:t})):e.target.result.value!==t&&(oSpP.sendSubscribeDataToServer(e.target.result.value,"unsubscribe"),oSpP.sendSubscribeDataToServer(t,"subscribe"),oSpP.putValueToDb("SPIDs",{type:"SubscriptionId",value:t}))})},this.sendSubscribeDataToServer=function(e,t,s){var o=new XMLHttpRequest;o.open("POST",p,!0),o.setRequestHeader("Content-Type","application/json"),void 0===s&&((s={}).uname=oSpP.checkCookie("lgn"),s.os=oSpP.detectOs());var n=w;switch(d){case"safari":case"firefox":n=""}s.variables=oSpP.getUserVariables();var i=window.location.href,r={action:"subscription",subscriptionId:e,subscription_action:t,subscription_type:n,appkey:c,browser:a,lang:oSpP.getBrowserlanguage(),url:i,custom_data:s,sPushHostHash:f};o.send(JSON.stringify(r))},this.isSafariNotificationSupported=function(){return"safari"in window&&"pushNotification"in window.safari},this.storeSubscription=function(e){oSpP.log("StoreSubscription: "+e),oSpP.putValueToDb("SPIDs",{type:"SubscriptionId",value:e})},this.clearDomain=function(e){return e.replace("://www.","://").replace("://www2.","://")},this.detectSite=function(){var e=!(-1===oSpP.clearDomain(window.location.href.toLowerCase()).indexOf(oSpP.clearDomain(o.toLowerCase())));return e||(e=!(-1===oSpP.clearDomain(window.location.href.toLowerCase()).indexOf(oSpP.clearDomain(t.toLowerCase())))),e},this.getBrowserlanguage=function(){return navigator.language.substring(0,2)},this.getUserVariables=function(){for(var e={},t=document.querySelectorAll("input.sp_push_custom_data"),s=0;s<t.length;s++)switch(t[s].type){case"text":case"hidden":e[t[s].name]=t[s].value;break;case"checkbox":e[t[s].name]=t[s].checked?1:0;break;case"radio":t[s].checked&&(e[t[s].name]=t[s].value)}return e},this.showPopUp=function(){oSpP.removeTransparentDiv(),u&&oSpP.sendPromptStat("prompt_granted");var e=580,t=580;D&&(t=e=1);var s=void 0!==window.screenLeft?window.screenLeft:screen.left,o=void 0!==window.screenTop?window.screenTop:screen.top,n=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,i=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,r=n/2-e/2+s,p=i/3-i/3+o,a=oSpP.getBrowserlanguage();""==a&&(a="en"),b=window.open(l+"/"+v+"/"+a+"/"+c+"/"+f,"_blank","scrollbars=yes, width="+e+", height="+t+", top="+p+", left="+r),window.focus&&b.focus(),m=setInterval(function(){b.postMessage("init",l),b.postMessage("initpage|"+window.location.href,l),b.postMessage("initvariables|"+JSON.stringify(oSpP.getUserVariables()),l)},100),u&&oSpP.closePrompt(!0)},this.addTransparentDiv=function(){var e=document.createElement("div");e.setAttribute("style","background: transparent;\nwidth: 100%;height: 100%;position: fixed;top: 0;left: 0;bottom: 0;right: 0;z-index: 999999;"),e.setAttribute("class","sendpulse-resubscribe-div"),e.setAttribute("onclick","oSpP.showPopUp(); return false;"),document.body.insertBefore(e,document.body.firstChild)},this.removeTransparentDiv=function(){if(0<document.getElementsByClassName("sendpulse-resubscribe-div").length){var e=document.getElementsByClassName("sendpulse-resubscribe-div")[0];document.body.removeChild(e)}},this.showPrompt=function(){oSpP.getDbValue("SPIDs","PromptShowed",function(e){void 0===e.target.result?(oSpP.sendPromptStat("prompt_showed"),oSpP.putValueToDb("SPIDs",{type:"PromptShowed",value:1})):oSpP.sendPromptStat("prompt_showed_again")});var e=document.getElementsByTagName("head")[0],t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href="https://cdn.sendpulse.com/dist/css/push/sendpulse-prompt.min.css?v="+Q,t.media="all",e.appendChild(t);var s,o=oSpP.getMessageLang(oSpP.getBrowserlanguage()),n="sendpulse-popover",i="display:none;",r=!0;if(void 0!==V&&0==V&&(r=!1),0<j.length){var p='<svg style="display: none;"><symbol id="sp_bell_icon"><path d="M139.165 51.42L103.39 15.558C43.412 61.202 3.74 132.185 0 212.402h50.174c3.742-66.41 37.877-124.636 88.99-160.98zM474.98 212.403h50.173c-3.742-80.217-43.413-151.2-103.586-196.845L385.704 51.42c51.398 36.346 85.533 94.572 89.275 160.982zm-49.388 12.582c0-77-53.39-141.463-125.424-158.487v-17.09c0-20.786-16.76-37.613-37.592-37.613s-37.592 16.827-37.592 37.614v17.09C152.95 83.52 99.56 148.004 99.56 224.983v137.918L49.408 413.01v25.076h426.336V413.01l-50.152-50.108V224.984zM262.576 513.358c3.523 0 6.76-.22 10.065-1.007 16.237-3.237 29.825-14.528 36.06-29.626 2.517-5.952 4.05-12.494 4.05-19.54H212.4c0 27.593 22.582 50.174 50.174 50.174z" /></symbol></svg>';"sendpulse-popover"===(n=(s=JSON.parse(j)).style)&&(n="sendpulse-native-popover");var a="sendpulse-prompt "+n;if((f=document.createElement("div")).setAttribute("class",a),0<s.backgroundcolor.length&&"sendpulse-fab"!=n&&(i=i+"background-color: "+s.backgroundcolor+";"),f.setAttribute("style",i),(w=document.createElement("div")).setAttribute("class","sendpulse-prompt-message"),(A=document.createElement("img")).setAttribute("class","sendpulse-bell-icon"),A.setAttribute("width","14"),A.setAttribute("height","14"),A.setAttribute("src","https://cdn.sendpulse.com/img/push/icon-ring.svg"),r){(I=document.createElement("span")).setAttribute("class","sp-link-wrapper"),(O=document.createElement("a")).setAttribute("class","sp-link"),O.setAttribute("href",z),O.setAttribute("target","_blank");var l=document.createElement("span");"sendpulse-modal"==n&&l.setAttribute("style","color:"+s.textcolor+" !important;"),l.innerHTML=W[o],"sendpulse-bar"!=n&&(O.innerHTML='<img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4gICAgPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiByeD0iMiIgZmlsbD0iIzAwQTJDMCIvPiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjUwNjQgOC4wOTYzOVY4LjQzMzc0VjguNjAyNDFMMTMuNDkwMiA5SDExLjg1OUg4LjQxNTc5SDguMTIyMDZMOC4wODMyMiA4LjcwNzI1TDcuNTk3NjEgNS4zNDc1NUw1LjM5MDY0IDEzLjc0ODhMNS4zMjQ2NiAxNEg1LjA2NjI2SDMuODQ0MzJIMy41Nzg4OUwzLjUxNzgxIDEzLjc0MDNMMi4zNTA3MyA5SDAuMzM1NTA5SDBWOC43NTE3NVY3LjI2NDU3VjdIMC4zMzU1MDlIMy42MDg4OUgzLjg2MDUyTDMuODk2NjMgNy4xODc1NEw0LjQ5ODkgOS44NTM5N0w2Ljk3NDcyIDAuMjUyNjgyTDcuMDM5ODcgMEg3LjI5OTQ5SDguNTU0MDZIOC44NTExMUw4Ljg4NzEgMC4yOTY0NzdMOS43MjgxNSA3LjAxODg3SDExLjgyODlMMTIuMzE1OSA3LjAxODg2TDEyLjYzMDkgNy4wMTg4N0gxMy40OTAyTDEzLjUwNjQgNy4xODc1NFY3LjM1NjIyVjguMDk2MzlaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIiBmaWxsPSJ3aGl0ZSIvPiAgICA8cGF0aCBkPSJNMTQuNDEyIDhDMTQuNDEyIDguOTc4MTQgMTMuNjIzMyA5Ljc3MTA4IDEyLjY1MDUgOS43NzEwOEMxMS42Nzc3IDkuNzcxMDggMTAuODg5MSA4Ljk3ODE0IDEwLjg4OTEgOEMxMC44ODkxIDcuMDIxODYgMTEuNjc3NyA2LjIyODkxIDEyLjY1MDUgNi4yMjg5MUMxMy42MjMzIDYuMjI4OTEgMTQuNDEyIDcuMDIxODYgMTQuNDEyIDhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIiBmaWxsPSJ3aGl0ZSIvPjwvc3ZnPg==">'),O.appendChild(l),I.appendChild(O)}if("sendpulse-native-popover"===n){i=i+"color: "+s.textcolor+" !important;",f.setAttribute("style",i),void 0!==s.custom&&void 0!==s.custom.prompt_position&&(a+=" sp-pos-"+s.custom.prompt_position,f.setAttribute("class",a)),(D=document.createElement("div")).setAttribute("class","sendpulse-native-info-inner sp-table-wrapper");var u=document.createElement("div");u.setAttribute("class","sp-cell"),A.setAttribute("src","https://cdn.sendpulse.com"+s.icon),A.setAttribute("width","64"),A.setAttribute("height","64"),u.appendChild(A);var c=document.createElement("div");c.setAttribute("class","sp-cell");var d=document.createElement("div");d.setAttribute("class","sendpulse-prompt-info sendpulse-prompt-message-text"),d.innerHTML+=B,c.appendChild(d),D.appendChild(u),D.appendChild(c)}else if("sendpulse-bar"==n){(D=document.createElement("div")).setAttribute("class","sendpulse-prompt-info sendpulse-prompt-message-text"),D.setAttribute("style","color: "+s.textcolor+" !important;"),D.innerHTML+=B;var m=document.createElement("span");w.innerHTML+=p+'<svg viewBox="0 0 525.153 525.153" width="40" height="40" xmlns:xlink="http://www.w3.org/1999/xlink" class="sendpulse-bell-icon"><use class="sendpulse-bell-path" style="fill: '+s.textcolor+' !important;" xlink:href="#sp_bell_icon" x="0" y="0" />  </svg>'}else if("sendpulse-modal"==n||"sendpulse-safari"==n||"sendpulse-fab"===n){if((D=document.createElement("div")).setAttribute("class","sendpulse-prompt-title sendpulse-prompt-message-text"),0<s.textcolor.length&&D.setAttribute("style","color: "+s.textcolor+" !important;"),D.innerHTML=H,(m=document.createElement("div")).setAttribute("class","sendpulse-prompt-info sendpulse-prompt-message-text"),0<s.textcolor.length&&m.setAttribute("style","color: "+s.textcolor+" !important;"),m.innerHTML+=B,"sendpulse-safari"==n?(A.setAttribute("src","https://cdn.sendpulse.com"+s.icon),A.setAttribute("width","64"),A.setAttribute("height","64"),w.appendChild(A)):"sendpulse-fab"!=n&&(w.innerHTML+=p+'<svg viewBox="0 0 525.153 525.153" width="40" height="40" xmlns:xlink="http://www.w3.org/1999/xlink" class="sendpulse-bell-icon"><use class="sendpulse-bell-path" style="fill: '+s.textcolor+' !important;" xlink:href="#sp_bell_icon" x="0" y="0" />  </svg>'),"sendpulse-fab"==n){if(void 0!==s.custom&&void 0!==s.custom.prompt_size&&"big"===s.custom.prompt_size){m=null,a="sendpulse-prompt sendpulse-floating-panel",f.setAttribute("class",a),w.setAttribute("style","background-color: "+s.btncolor+"; color: "+s.textcolor+" !important;"),w.setAttribute("onclick","oSpP.showPopUp(); return false;"),(D=document.createElement("div")).setAttribute("style","color: "+s.textcolor+" !important;"),D.setAttribute("class","sp-table-wrapper");var b=document.createElement("div");b.setAttribute("class","sp-cell");var S=document.createElement("a");S.innerHTML+='<svg viewBox="0 0 525.153 525.153" width="40" height="40" xmlns:xlink="http://www.w3.org/1999/xlink" class="sendpulse-bell-icon"><use class="sendpulse-bell-path bell-prompt-fab" style="fill: '+s.textcolor+' !important;" xlink:href="#sp_bell_icon" x="0" y="0">'+p+"</use></svg>",S.setAttribute("onclick","oSpP.showPopUp(); return false;"),S.setAttribute("href","#"),b.appendChild(S);var g=document.createElement("div");g.setAttribute("class","sp-cell");var P=document.createElement("a");P.setAttribute("href","#"),P.setAttribute("onclick","oSpP.showPopUp(); return false;"),P.innerHTML=H,g.appendChild(P),D.appendChild(b),D.appendChild(g);var h=document.createElement("div");h.setAttribute("class","sendpulse-prompt-label"),(O=document.createElement("a")).setAttribute("href",z),O.setAttribute("target","_blank"),(l=document.createElement("span")).innerHTML=W[o],O.appendChild(l),h.appendChild(O)}else{var v=document.createElement("div");v.setAttribute("class","sendpulse-prompt-fab"),0<s.btncolor.length&&v.setAttribute("style","background-color: "+s.btncolor+" !important;"),v.innerHTML+=p+'<svg viewBox="0 0 525.153 525.153" width="40" height="40" xmlns:xlink="http://www.w3.org/1999/xlink" class="sendpulse-bell-icon" ><use class="sendpulse-bell-path bell-prompt-fab" style="fill: '+s.iconcolor+' !important;" xlink:href="#sp_bell_icon" x="0" y="0" /></svg>',v.setAttribute("onclick","oSpP.showPopUp(); return false;")}void 0!==s.custom&&void 0!==s.custom.prompt_position&&(a+=" sendpulse-fab-"+s.custom.prompt_position,f.setAttribute("class",a))}}}else{var f,w,D,A;(f=document.createElement("div")).setAttribute("class","sendpulse-prompt "+n),f.setAttribute("style",i),(w=document.createElement("div")).setAttribute("class","sendpulse-prompt-message"),(D=document.createElement("div")).setAttribute("class","sendpulse-prompt-message-text"),D.innerHTML=U+" "+Z[o],(m=document.createElement("div")).setAttribute("class","sendpulse-prompt-info sendpulse-prompt-message-text"),(A=document.createElement("img")).setAttribute("class","sendpulse-bell-icon"),A.setAttribute("width","14"),A.setAttribute("height","14"),A.setAttribute("src","https://cdn.sendpulse.com/img/push/icon-ring.svg"),m.appendChild(A),m.innerHTML+=" "+F[o]}if("sendpulse-fab"!=n){var y=document.createElement("div");y.setAttribute("class","sendpulse-prompt-buttons");var M=document.createElement("button");M.setAttribute("class","sendpulse-prompt-btn sendpulse-accept-btn"),M.setAttribute("type","button"),M.setAttribute("onclick","oSpP.showPopUp(); return false;"),M.innerHTML=R[o];var I,O,T=document.createElement("button");if(T.setAttribute("class","sendpulse-prompt-btn sendpulse-disallow-btn"),T.setAttribute("type","button"),T.setAttribute("onclick","oSpP.denyMessage(); return false;"),T.innerHTML=Y[o],"sendpulse-popover"!=n&&(M.innerHTML=s.allowbtntext,T.innerHTML=s.disallowbtntext,"sendpulse-safari"!=n&&(M.setAttribute("style","background-color:"+s.buttoncolor+" !important;border-color:"+s.buttoncolor+" !important;"),T.setAttribute("style","color:"+s.buttoncolor+" !important;"))),0==j.length&&r)(I=document.createElement("span")).setAttribute("class","sp-link-wrapper"),(O=document.createElement("a")).setAttribute("class","sp-link"),O.setAttribute("href",z),O.setAttribute("target","_blank"),(l=document.createElement("span")).innerHTML=W[o],"sendpulse-modal"==n&&l.setAttribute("style","color:"+s.textcolor+" !important;"),O.appendChild(l),I.appendChild(O),y.appendChild(I);else r&&void 0!==I&&y.appendChild(I);if("sendpulse-native-popover"==n){var E=document.createElement("div");E.setAttribute("class","sp-table-wrapper");var x=document.createElement("div");x.setAttribute("class","sp-cell"),r&&void 0!==I&&x.appendChild(I);var N=document.createElement("div");N.setAttribute("class","sp-cell"),N.appendChild(T);var C=document.createElement("div");C.setAttribute("class","sp-cell"),C.appendChild(M),E.appendChild(x),E.appendChild(N),E.appendChild(C),y.appendChild(E)}else y.appendChild(T),y.appendChild(M);if(r&&"sendpulse-modal"==n){var L=document.createElement("div");L.innerHTML="&nbsp;",y.appendChild(L)}}if(w.appendChild(D),void 0!==m&&null!=m&&"sendpulse-native-popover"!=n&&w.appendChild(m),"sendpulse-fab"!=n?(w.appendChild(y),"sendpulse-bar"==n&&r&&void 0!==I&&f.appendChild(I),f.appendChild(w)):void 0!==s.custom.prompt_size&&"big"===s.custom.prompt_size?(f.appendChild(w),r&&void 0!==h&&f.appendChild(h)):(r&&void 0!==I&&w.appendChild(I),f.appendChild(w),f.appendChild(v)),"sendpulse-popover"!=n&&"sendpulse-safari"!=n&&"sendpulse-fab"!=n){var _=document.createElement("button");_.setAttribute("class","sendpulse-prompt-close"),_.setAttribute("onclick","oSpP.closePrompt(); return false;"),_.setAttribute("style","color:"+s.textcolor+" !important;"),_.innerHTML="&times;",f.appendChild(_)}if(document.body.insertBefore(f,document.body.childNodes[0]),"sendpulse-modal"==n){var k=document.createElement("div");k.setAttribute("class","sendpulse-prompt-backdrop"),k.setAttribute("style","display:none;"),document.body.insertBefore(k,document.body.childNodes[1])}setTimeout(function(){f.className+=f.className?" show-prompt":"show-prompt"},1e3)},this.denyMessage=function(){oSpP.sendPromptStat("prompt_denied"),oSpP.storeSubscription("DENY"),oSpP.closePrompt(!0)},this.closePrompt=function(e){void 0===e&&oSpP.sendPromptStat("prompt_closed"),document.body.removeChild(document.querySelector(".sendpulse-prompt")),0<document.getElementsByClassName("sendpulse-prompt-backdrop").length&&document.body.removeChild(document.querySelector(".sendpulse-prompt-backdrop")),oSpP.putValueToDb("SPIDs",{type:"PromptClosed",value:5})},this.initDb=function(t){if(r)t();else{var e=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB).open("sendpulse_push_db",2);e.onsuccess=function(e){r=e.target.result,t()},e.onupgradeneeded=function(e){e.target.result.createObjectStore("SPIDs",{keyPath:"type"})}}},this.getDbValue=function(e,t,s){oSpP.initDb(function(){r.transaction([e],"readonly").objectStore(e).get(t).onsuccess=s})},this.putValueToDb=function(e,t){oSpP.initDb(function(){r.transaction([e],"readwrite").objectStore(e).put(t)})},this.deleteDbValue=function(e,t){oSpP.initDb(function(){r.transaction([e],"readwrite").objectStore(e).delete(t)})},this.log=function(e){},this.detectBrowser=function(){var e,t=navigator.userAgent,s=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],o=t.match(/(edge(?=\/))\/?\s*(\d+)/i)||[];return"Edge"===o[1]?{name:o[1],version:o[2]}:/trident/i.test(s[1])?{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""}:"Chrome"===s[1]&&null!=(e=t.match(/\bOPR\/(\d+)/))?{name:"Opera",version:e[1]}:(s=s[2]?[s[1],s[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&s.splice(1,1,e[1]),{name:s[0],version:s[1]})},this.detectOs=function(){return-1!=navigator.userAgent.indexOf("Windows")?"Windows":-1!=navigator.userAgent.indexOf("Android")?"Android":-1!=navigator.userAgent.indexOf("Linux")?"Linux":-1!=navigator.userAgent.indexOf("iPhone")?"iOS":-1!=navigator.userAgent.indexOf("Mac")?"Mac OS":-1!=navigator.userAgent.indexOf("FreeBSD")?"FreeBSD":""},this.uns=function(){oSpP.deleteDbValue("SPIDs","SubscriptionId")},this.getMessageLang=function(e){return"ua"==(e=e.substring(0,2).toLowerCase())||"uk"==e?"ua":"ru"==e?"ru":"de"==e?"de":"en"},this.push=function(e,t){if(!oSpP.detectSite())return oSpP.log("Application allowed only for "+o),!1;S[e]=t,oSpP.getDbValue("SPIDs","SubscriptionId",function(e){void 0===e.target.result?g||(g=setInterval(function(){oSpP.getDbValue("SPIDs","SubscriptionId",function(e){void 0!==e.target.result&&(oSpP.sendUpdatesToServer(e.target.result.value),clearInterval(g),g=!1)})},1e3)):oSpP.sendUpdatesToServer(e.target.result.value)})},this.sendUpdatesToServer=function(e){var t=w;switch(d){case"safari":case"firefox":t=""}var s=new XMLHttpRequest;s.open("POST",p,!0),s.setRequestHeader("Content-Type","application/json");var o={action:"subscription",subscriptionId:e,subscription_type:t,subscription_action:"update_variables",appkey:c,sPushHostHash:f,custom_data:{variables:S}};s.send(JSON.stringify(o))},this.sendPromptStat=function(e){},this.getPromptDelay=function(){return parseInt(e)},this.getSettingsShowByVisitNumber=function(){return parseInt(h)},this.startDelayedSubscription=function(t){if(0<parseInt(e))var s=setInterval(function(){oSpP.getDbValue("SPIDs","PromptDelay",function(e){void 0!==e.target.result?(new Date).getTime()>=e.target.result.value&&(clearInterval(s),t()):t()})},1e3);else t()},this.getAuthEmailFromUrl=function(){var e=window.location.href,t=new RegExp("[?&]spush(=([^&#]*)|&|#|$)").exec(e);if(t&&t[2]){var s=atob(decodeURIComponent(t[2].replace(/\+/g," ")));void 0!==s&&0<s.length&&oSpP.push("email",s)}},this.getVisitsCount=function(){var t=1;oSpP.getDbValue("SPIDs","VisitsCount",function(e){void 0===e.target.result||(t=e.target.result.value,t+=1),oSpP.putValueToDb("SPIDs",{type:"VisitsCount",value:t}),t>=oSpP.getSettingsShowByVisitNumber()&&oSpP.initPrompt()})},this.initPrompt=function(){0<oSpP.getPromptDelay()?oSpP.getDbValue("SPIDs","PromptDelay",function(e){void 0===e.target.result&&oSpP.putValueToDb("SPIDs",{type:"PromptDelay",value:(new Date).getTime()+1e3*oSpP.getPromptDelay()}),oSpP.start()}):oSpP.start(),oSpP.getAuthEmailFromUrl()}}window.addEventListener("load",function(){1<oSpP.getSettingsShowByVisitNumber()?oSpP.getVisitsCount():oSpP.initPrompt()});var oSpP=new oSendpulsePush;